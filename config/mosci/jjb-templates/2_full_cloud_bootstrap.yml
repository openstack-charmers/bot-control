- job:
    description: null
    disabled: false
    name: '2. Full Cloud - Bootstrap'
    parameters:
    - choice:
        choices:
        - amd64
        - arm64
        - ppc64el
        - s390x
        description: Which architecture to deploy on
        name: ARCH
    - string:
        default: test
        description: Name or label of slave - use a name to be very specific, or a
          label to use any machine with that particular label.
        name: SLAVE_NODE_NAME
        trim: false
    - choice:
        choices:
        - ruxton
        - icarus
        - s390x
        description: ''
        name: CLOUD_NAME
    - string:
        default: tags=uosci
        description: |-
          Model constraints e.g.
          arch=amd64 tags=uosci,dell
        name: MODEL_CONSTRAINTS
        trim: false
    - string:
        default: tags=uosci
        description: |-
          Model constraints e.g.
          arch=amd64 tags=uosci,dell
        name: BOOTSTRAP_CONSTRAINTS
        trim: false
    - string:
        default: ''
        description: Custom workspace directory
        name: WORKSPACE
        trim: false
    - bool:
        default: false
        description: Attempt to release MAAS nodes or revert s390x LPAR snapshots
        name: PRE_RELEASE_MACHINES
    - raw:
        xml: |
          <com.cwctravel.hudson.plugins.extended__choice__parameter.ExtendedChoiceParameterDefinition plugin="extended-choice-parameter@0.76">
          <name>S390X_NODES</name>
          <description>s390x lpars to be added to this deployment</description>
          <quoteValue>false</quoteValue>
          <saveJSONParameterToFile>false</saveJSONParameterToFile>
          <visibleItemCount>10</visibleItemCount>
          <type>PT_CHECKBOX</type>
          <value>10.13.3.5,10.13.3.6,10.13.3.7,10.13.3.8,10.13.3.9,10.13.3.10,10.13.3.11,10.13.3.12,10.13.3.13,10.13.3.14</value>
          <defaultValue>none</defaultValue>
          <multiSelectDelimiter>,</multiSelectDelimiter>
          <descriptionPropertyValue>s4lp5,s4lp6,s4lp7,s4lp8,s4lp9,s4lpa,s4lpb,s4lpc,s4lpd,s4lpe</descriptionPropertyValue>
          </com.cwctravel.hudson.plugins.extended__choice__parameter.ExtendedChoiceParameterDefinition>
    - bool:
        default: true
        description: Bootstrap on the jenkins slave instead of on a maas machine (this
          is mandatory for an s390x only deploy)
        name: BOOTSTRAP_ON_SLAVE
    - bool:
        default: false
        description: Enable this option if you're deploying on top of a "full cloud
          openstack deployment"
        name: OVERCLOUD_DEPLOY
    - string:
        default: ''
        description: Specify a controller name for overcloud deploys (i.e. sideload
          tests)
        name: CONTROLLER_NAME
        trim: false
    - string:
        default: ''
        description: Specify a model name for overcloud deploys (i.e. sideload tests)
        name: MODEL_NAME
        trim: false
    - string:
        default: ''
        description: Name of juju controller for openstack deployment, e.g. amd64-mosci-ruxton-maas
        name: OVERCLOUD_NAME
        trim: false
    - string:
        default: ''
        description: 'For overcloud deploys: allows passing keystone_auth_url to test
          jobs so that they can be run on separate slaves'
        name: KEYSTONE_AUTH_URL
        trim: false
    - bool:
        default: false
        description: Force release of machines, ignores locked state
        name: FORCE_RELEASE
    - string:
        default: mosci
        description: ''
        name: MAAS_OWNER
        trim: false
    - string:
        default: vNSmAQUASAkVcpFu2N:khmguH2CFh7phsjBBF:vZCKGMea5U9sfrzzWvGwBGv9KDySz3HJ
        description: ''
        name: RUXTON_API_KEY
        trim: false
    - string:
        default: ''
        description: ''
        name: ICARUS_API_KEY
        trim: false
    - bool:
        default: false
        description: If enabled, we will kill-controller the existing controller we're
          trying to bootstrap
        name: FORCE_NEW_CONTROLLER
    - text:
        default: ''
        description: |-
          Value to apply to model config after bootstrap, one key=value pair per line, e.g.

          agent-stream=devel
        name: OVERRIDE_MODEL_CONFIG
        trim: false
    - text:
        default: ''
        description: |-
          Value to apply to model config after bootstrap, one key=value pair per line, e.g.

          max-logs-size=4096M
        name: OVERRIDE_CONTROLLER_CONFIG
        trim: false
    pipeline-scm:
      lightweight-checkout: true
      scm:
      - git:
          branches:
          - '*/admcleod_test'
          url: https://github.com/openstack-charmers/bot-control.git
      script-path: ./config/pipelines-mosci/2_full_cloud_bootstrap/Jenkinsfile.groovy
    project-type: pipeline
    properties:
    - raw:
        xml: |
          <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.28">
          <autoRebuild>false</autoRebuild>
          <rebuildDisabled>false</rebuildDisabled>
          </com.sonyericsson.rebuild.RebuildSettings>
    - raw:
        xml: |
          <hudson.plugins.throttleconcurrents.ThrottleJobProperty plugin="throttle-concurrents@2.0.1">
          <maxConcurrentPerNode>0</maxConcurrentPerNode>
          <maxConcurrentTotal>0</maxConcurrentTotal>
          <categories class="java.util.concurrent.CopyOnWriteArrayList" />
          <throttleEnabled>false</throttleEnabled>
          <throttleOption>project</throttleOption>
          <limitOneJobWithMatchingParams>false</limitOneJobWithMatchingParams>
          <paramsToUseForLimit />
          </hudson.plugins.throttleconcurrents.ThrottleJobProperty>
    triggers: []
